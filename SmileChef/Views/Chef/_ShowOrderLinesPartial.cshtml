@using SmileChef.Models.DbModels
@model Order

@{

}

<div class="col-md-12">
    <div class="d-flex justify-content-between">
        <div>
            <h1 class="lead">Showing Orderline History</h1>
            <h2 class="fs-5 fw-semibold">OrderId: @Model.OrderId</h2>
        </div>
        <div>
            <button class="btn btn-sm btn-success"><i class="fa fa-print"></i></button>
            <button class="btn btn-sm btn-primary"><i class="fab fa-dochub"></i></button>
            <button class="btn btn-sm btn-info"><i class="fab fa-airbnb"></i></button>
        </div>
    </div>
    
    <hr class="mt-2"/>
    <table class="table table-striped">
        <thead>
            <tr>
                <th colspan="2">@Html.LabelFor(m => m.OrderLines[0].RecipeName)</th>
                <th>Recipe Price</th>
                <th>@Html.LabelFor(m => m.OrderLines[0].Quantity)</th>
                <th>@Html.LabelFor(m => m.OrderLines[0].Price)</th>
            </tr>
        </thead>
        <tbody class="fs-5">
            @foreach (var ol in Model.OrderLines)
            {
                <tr>
                    <td colspan="2">@ol.RecipeName</td>
                    <td>
                        @if (ol.Recipe is PremiumRecipe pr)
                        {
                            @(pr.Price!.Value.ToString("C2"))
                        }
                    </td>
                    <td><span class="ps-3">@ol.Quantity</span></td>
                    <td>@ol.Price.ToString("C2")</td>
                </tr>
            }
            <tr>
                <td colspan="2"></td>
                <td></td>
                <td class="lead">Subtotal: </td>
                <td><span class="fw-semibold">@Model.TotalPrice.ToString("C2")</span></td>
            </tr>
        </tbody>
    </table>
</div>
